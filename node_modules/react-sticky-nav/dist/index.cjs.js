"use strict";var React=require("react"),extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function __extends(t,e){function n(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var __assign=function(){return(__assign=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function __rest(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&(n[i[o]]=t[i[o]])}return n}var StickyNav=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={position:"unfixed",scroll:0,ref:e.props.innerRef||React.createRef(),top:0},e.animateTop=function(){var t=e.state.ref.current;if(t&&!e.props.disabled){var n=window.pageYOffset;if(!(n<0)){var i,o=t.classList,r=e.state.scroll,s=n-r>0?"down":"up",a=e.state.top+r-n,d=t.getBoundingClientRect(),p=d.height,c=d.top;"down"===s?(i=Math.max(a,-p),!o.contains("hidden")&&a<-p&&(o.remove("pinned","unfixed"),o.add("hidden"),e.setState({position:"hidden"}))):(i=Math.min(a,0),!o.contains("pinned")&&a>-p&&(o.remove("hidden","unfixed"),o.add("pinned"),e.setState({position:"pinned"}))),!o.contains("unfixed")&&(c>0||0===n)&&(o.remove("hidden","pinned"),o.add("unfixed"),e.setState({position:"unfixed"})),e.setState({scroll:n,top:i})}}},e.handleScroll=function(){return window.requestAnimationFrame(e.animateTop)},e}return __extends(e,t),e.prototype.addEventListener=function(){var t=this;"undefined"!=typeof window&&this.setState({scroll:window.pageYOffset},function(){return window.addEventListener("scroll",t.handleScroll)})},e.prototype.removeEventListener=function(){"undefined"!=typeof window&&window.removeEventListener("scroll",this.handleScroll)},e.prototype.componentDidMount=function(){this.props.disabled||this.addEventListener();var t=this.state.ref.current;if(t){var e=t.getBoundingClientRect(),n=e.height,i=e.top;i>=0?t.classList.add("unfixed"):i<-n?(t.classList.add("hidden"),this.setState({position:"hidden"})):(t.classList.add("pinned"),this.setState({position:"pinned"}))}},e.prototype.componentDidUpdate=function(t){var e=t.disabled,n=this.props.disabled;n!==e&&(n?this.removeEventListener():this.addEventListener())},e.prototype.componentWillUnmount=function(){this.props.disabled||this.removeEventListener()},e.prototype.render=function(){var t=this.props,e=t.children,n=(t.innerRef,t.render),i=__rest(t,["children","innerRef","render"]),o=this.state,r=o.position,s=o.ref,a=o.top;if(n)return n({position:r,ref:s,top:a});var d={position:"sticky",top:a+"px"};return React.createElement("nav",__assign({ref:s,style:d},i),"function"==typeof e?e(r):e)},e.defaultProps={disabled:!1},e}(React.PureComponent),index=React.forwardRef(function(t,e){return React.createElement(StickyNav,__assign({},t,{innerRef:e}))});module.exports=index;
