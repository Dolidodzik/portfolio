import{forwardRef as t,createElement as e,createRef as n,PureComponent as o}from"react";var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var r=function(){return(r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var s=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={position:"unfixed",scroll:0,ref:e.props.innerRef||n(),top:0},e.animateTop=function(){var t=e.state.ref.current;if(t&&!e.props.disabled){var n=window.pageYOffset;if(!(n<0)){var o,i=t.classList,r=e.state.scroll,s=n-r>0?"down":"up",d=e.state.top+r-n,p=t.getBoundingClientRect(),a=p.height,f=p.top;"down"===s?(o=Math.max(d,-a),!i.contains("hidden")&&d<-a&&(i.remove("pinned","unfixed"),i.add("hidden"),e.setState({position:"hidden"}))):(o=Math.min(d,0),!i.contains("pinned")&&d>-a&&(i.remove("hidden","unfixed"),i.add("pinned"),e.setState({position:"pinned"}))),!i.contains("unfixed")&&(f>0||0===n)&&(i.remove("hidden","pinned"),i.add("unfixed"),e.setState({position:"unfixed"})),e.setState({scroll:n,top:o})}}},e.handleScroll=function(){return window.requestAnimationFrame(e.animateTop)},e}return function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(o,t),o.prototype.addEventListener=function(){var t=this;"undefined"!=typeof window&&this.setState({scroll:window.pageYOffset},function(){return window.addEventListener("scroll",t.handleScroll)})},o.prototype.removeEventListener=function(){"undefined"!=typeof window&&window.removeEventListener("scroll",this.handleScroll)},o.prototype.componentDidMount=function(){this.props.disabled||this.addEventListener();var t=this.state.ref.current;if(t){var e=t.getBoundingClientRect(),n=e.height,o=e.top;o>=0?t.classList.add("unfixed"):o<-n?(t.classList.add("hidden"),this.setState({position:"hidden"})):(t.classList.add("pinned"),this.setState({position:"pinned"}))}},o.prototype.componentDidUpdate=function(t){var e=t.disabled,n=this.props.disabled;n!==e&&(n?this.removeEventListener():this.addEventListener())},o.prototype.componentWillUnmount=function(){this.props.disabled||this.removeEventListener()},o.prototype.render=function(){var t=this.props,n=t.children,o=(t.innerRef,t.render),i=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&(n[o[i]]=t[o[i]])}return n}(t,["children","innerRef","render"]),s=this.state,d=s.position,p=s.ref,a=s.top;return o?o({position:d,ref:p,top:a}):e("nav",r({ref:p,style:{position:"sticky",top:a+"px"}},i),"function"==typeof n?n(d):n)},o.defaultProps={disabled:!1},o}(o),d=t(function(t,n){return e(s,r({},t,{innerRef:n}))});export default d;
